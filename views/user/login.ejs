<%- include("../partials/user/loginHeader.ejs") %>

    <div class="container mt-5">
        <div id="signin-modal" class="form-box">
            <div class="form-tab">
                <ul class="nav nav-pills nav-fill" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="signin-tab" data-toggle="tab" href="#signin" role="tab"
                            aria-controls="signin" aria-selected="true"
                            style="background-color: transparent; color: #1CC0A0;">Sign In</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/register" aria-selected="false"
                            style="background-color: transparent;">Register</a>
                    </li>
                </ul>
                <div class="tab-content" id="tab-content-5">
                    <div class="tab-pane fade show active" id="signin" role="tabpanel" aria-labelledby="signin-tab">
                        <p id="errormsg" class="text-center text-danger">
                            <%if(typeof message !='undefined' ){%>
                                <%=message%>
                                    <% } %>
                        </p>
                        <form action="/login" method="post">
                            <div class="form-group">
                                <label for="singin-email">User email address *</label>
                                <input type="text" class="form-control" id="singin-email" name="email" value="ajmal@gmail.com"
                                    oninput="removeErrorMessage()">
                                <div id="error1" class="text-danger" style="display:none;"></div>
                            </div><!-- End .form-group -->

                            <div class="form-group">
                                <label for="singin-password">Password *</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="singin-password" value="qwer1234" name="password" oninput="removeErrorMessage()">
                                    <div class="input-group-append">
                                        <span class="input-group-text" id="toggle-password" style="cursor: pointer;">
                                            Show
                                        </span>
                                    </div>
                                </div>
                                <div id="error2" class="text-danger" style="display:none;"></div>
                            </div><!-- End .form-group -->
                            

                            <div class="form-footer">
                                <button type="submit" class="btn btn-outline-success">
                                    <span>LOG IN</span>
                                    <i class="icon-long-arrow-right"></i>
                                </button>
                                <a href="/forgotPassword" class="forgot-link">Forgot Your Password?</a>
                            </div><!-- End .form-footer -->
                        </form>
                        <div class="form-choice">
                            <p class="text-center">or sign in with</p>
                            <div class="row">
                                <div class="col-sm-6 mx-auto">
                                    <a href="/auth/google" class="btn btn-login btn-g">
                                        <i class="icon-google"></i>
                                        Login With Google
                                    </a>
                                </div><!-- End .col-6 -->
                            </div><!-- End .row -->
                        </div><!-- End .form-choice -->
                    </div><!-- .End .tab-pane -->

                </div><!-- End .tab-content -->
            </div><!-- End .form-tab -->
        </div><!-- End .form-box -->
    </div><!-- End .container -->



    <script>
        const emailid = document.getElementById("singin-email");
        const passwordid = document.getElementById("singin-password");
        const error1 = document.getElementById("error1");
        const error2 = document.getElementById("error2");
        const signinForm = document.querySelector("form");

        function emailCheck(e) {
            const emailVal = emailid.value;
            const emailPattern = /^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/;

            if (!emailPattern.test(emailVal)) {
                error1.style.display = "block";
                error1.innerHTML = "Enter a valid email";
            } else {
                error1.style.display = "none";
                error1.innerHTML = "";
            }
        }

        function passwordCheck(e) {
            const passwordVal = passwordid.value;

            if (passwordVal.trim() === "") {
                error2.style.display = "block";
                error2.innerHTML = "Password is required";
            } else {
                error2.style.display = "none";
                error2.innerHTML = "";
            }
        }

    document.addEventListener("DOMContentLoaded", () => {
        signinForm.addEventListener("submit", (e) => {
        emailCheck();
        passwordCheck();

        if (
            !emailid ||
            !passwordid ||
            !error1 ||
            !error2 ||
            !signinForm
        ) {
            console.error("One or more elements not found");
        }

        if (
            error1.innerHTML ||
            error2.innerHTML
        ) {
            e.preventDefault();
        }
    });

    // Toggle password visibility
    const togglePassword = document.getElementById('toggle-password');
    const passwordInput = document.getElementById('singin-password');

    togglePassword.addEventListener('click', function () {
        // Toggle the type attribute
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);

        // Toggle the text between Show and Hide
        this.textContent = type === 'password' ? 'Show' : 'Hide';
    });
});

    </script>
    <script>
        function removeErrorMessage() {
            error1.innerHTML = '';
            error1.style.display = 'none';
            error2.innerHTML = '';
            error2.style.display = 'none';
            const errorMsg = document.getElementById("errormsg");
            errorMsg.innerHTML = '';
        }
    </script>

    <!-- Plugins JS File -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.hoverIntent.min.js"></script>
    <script src="assets/js/jquery.waypoints.min.js"></script>
    <script src="assets/js/superfish.min.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- Main JS File -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/demos/demo-20.js"></script>
    </body>

    </html>